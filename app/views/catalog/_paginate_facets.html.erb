<% nb_pages = (total/per_page.to_f).ceil %>
<nav data-results-pagination-index-value="<%= current_page %>"
     data-results-pagination-pages-value="<%= nb_pages %>">
    <ul class="pagination pagination-sm justify-content-center">
        <% if current_page == 1 %>
            <li data-results-pagination-target="previousButton" class="page-item disabled" data-action="click->results-pagination#previous_page">
                <a class="page-link" href="#">&laquo;</a>
            </li>
        <% else %>
            <li data-results-pagination-target="previousButton" class="page-item" data-action="click->results-pagination#previous_page">
                <a class="page-link" href="#">&laquo;</a>
            </li>
        <% end %>
        <% if nb_pages > 10 %>
            <% (1..nb_pages).to_a.each do |i| %>
                <% if (i >= current_page-2 and i <= current_page+2) or i <= 1 or i >= nb_pages %>
                    <li data-results-pagination-target="pageButton" class="page-item<%= (i == current_page) ? " active" : "" %>" data-action="click->results-pagination#page_button">
                        <a class="page-link" href="<%= url_for current_page_params.merge({page: i}) %>"><%= i %></a>
                    </li>
                <% elsif (i == 2 and current_page >= 5) or (i == nb_pages-1 and current_page <= nb_pages-4) %>
                    <li data-results-pagination-target="pageButton" class="page-item disabled">
                        <a class="page-link" href="#">...</a>
                    </li>
                <% end %>
            <% end %>
        <% else %>
            <% (1..nb_pages).to_a.each do |i| %>
                <li data-results-pagination-target="pageButton" class="page-item<%= (i == current_page) ? " active" : "" %>" data-action="click->results-pagination#page_button">
                    <a class="page-link" href="<%= url_for current_page_params.merge({page: i}) %>"><%= i %></a>
                </li>
            <% end %>
        <% end %>
        <% if current_page == nb_pages %>
            <li data-results-pagination-target="nextButton" class="page-item disabled" data-action="click->results-pagination#next_page">
                <a class="page-link" href="#">&raquo;</a>
            </li>
        <% else %>
            <li data-results-pagination-target="nextButton" class="page-item" data-action="click->results-pagination#next_page">
                <a class="page-link" href="#">&raquo;</a>
            </li>
        <% end %>
    </ul>
</nav>