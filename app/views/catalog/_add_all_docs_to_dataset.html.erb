<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal">x</button>
  <h4 class="modal-title" id="params_label">Add documents to a dataset</h4>
</div>
<div class="modal-body">
  <p>You can add all the documents returned by the search to an existing dataset. You also can choose the default relevance with which those documents will be added.</p>
  <% if current_user.datasets.empty? %>
    <div class="">
      <p><%= link_to "Create a dataset", "/datasets/new" %> to add documents to.</p>
    </div>
  <% else %>
      <form autocomplete="off" novalidate="novalidate">
        <div class="form-group">
          <label for="dataset">Select the dataset documents will be added to.</label>
          <select id="add_docs_dataset_select" name="dataset" class="form-control form-control-sm">
            <%= session[:working_dataset] ||= current_user.datasets.first.id %>
            <%= options_for_select(current_user.datasets.map{|d| ["#{d.title} (#{d.documents.size} docs)", d.id]}, session[:working_dataset]) %>
          </select>
        </div>
        <div class="form-group">
          <label for="add_docs_relevancy">Relevancy</label>
          <select id="add_docs_dataset_relevancy_select" name="add_docs_relevancy" class="form-control form-control-sm">
            <%= options_for_select [["Not relevant", 0],["Somewhat relevant",1],["Relevant",2],["Very relevant",3]] %>
          </select>
        </div>
        <div class="form-group">
          <button class="btn btn-primary" type="button" id="validate_add_all_docs">
            Add documents
          </button>
        </div>
    </form>
    <p id="log_add_docs"></p>
  <% end %>
</div>
